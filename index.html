<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Foundation Models for the Brain</title>
  <meta name="description" content="An invite-only research convening on brain foundation models. March 26, 2026 in New York City.">

  <!-- Open Graph -->
  <meta property="og:title" content="Foundation Models for the Brain">
  <meta property="og:description" content="An invite-only research convening on brain foundation models. March 26, 2026 in New York City.">
  <meta property="og:type" content="website">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">

  <style>
    /* ========== DESIGN TOKENS ========== */
    :root {
      /* Colors */
      --ink: #1F1F1F;
      --muted: #6B6B6B;
      --quiet: #8A8A8A;
      --rule: #E3E3E3;
      --bg: #F7F6F4;
      --accent: #79BFD0;
      --accent-light: #A8D5E2;

      /* Fonts */
      --font-display: Georgia, "Times New Roman", serif;
      --font-sans: "Helvetica Neue", Helvetica, Arial, sans-serif;

      /* Type scale */
      --h1: clamp(48px, 5.5vw, 72px);
      --h2: 26px;
      --h3: 18px;
      --kicker: 12px;
      --body: 17px;
      --small: 15px;

      /* Line heights */
      --lh-tight: 1.08;
      --lh-head: 1.2;
      --lh-body: 1.65;

      /* Letter spacing */
      --track-tight: -0.01em;
      --track-caps: 0.18em;

      /* Layout */
      --left-margin: 10vw;
    }

    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-sans);
      font-size: var(--body);
      line-height: var(--lh-body);
      color: var(--ink);
      background-color: var(--bg);
      -webkit-font-smoothing: antialiased;
    }

    /* ========== LAYOUT ========== */
    .page-wrap {
      padding-left: var(--left-margin);
      padding-right: 5vw;
    }

    .content-width {
      max-width: 1100px;
    }

    /* ========== NAVIGATION ========== */
    .nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 24px 0;
      border-bottom: 1px solid var(--rule);
      margin-bottom: 60px;
    }

    .nav-brand {
      font-size: var(--kicker);
      font-weight: 500;
      letter-spacing: var(--track-caps);
      text-transform: uppercase;
      color: var(--muted);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .nav-brand:hover {
      color: var(--accent);
    }

    .nav-links {
      font-size: var(--kicker);
      font-weight: 500;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--quiet);
    }

    .nav-links a {
      color: inherit;
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .nav-links a:hover {
      color: var(--accent);
    }

    /* ========== HERO ========== */
    .hero {
      position: relative;
      min-height: 420px;
      padding-bottom: 60px;
      overflow: hidden;
    }

    .hero-content {
      position: relative;
      z-index: 2;
      max-width: 600px;
      padding-top: 20px;
    }

    /* Hero Title - Serif display, the ONE editorial element */
    .hero-title {
      font-family: var(--font-display);
      font-size: var(--h1);
      font-weight: 400;
      line-height: var(--lh-tight);
      letter-spacing: var(--track-tight);
      color: var(--ink);
      margin-bottom: 20px;
    }

    /* Hero text: unified system for subtitle, lede, and meta */
    .hero-subtitle,
    .hero-lede {
      font-family: var(--font-sans);
      font-size: 18px;
      font-weight: 400;
      font-style: normal;
      line-height: 1.5;
      color: var(--muted);
      max-width: 540px;
      margin: 0 0 14px 0;
    }

    .hero-meta {
      font-family: var(--font-sans);
      font-size: 18px;
      font-weight: 400;
      line-height: 1.5;
      color: #4f4f4f;
      letter-spacing: 0.02em;
      margin: 0;
    }

    /* ========== HERO ANIMATION ========== */
    .hero-visual {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      pointer-events: none;
    }

    .hero-visual canvas {
      width: 100%;
      height: 100%;
    }

    /* Reduced motion: show static final state */
    @media (prefers-reduced-motion: reduce) {
      .hero-visual canvas {
        animation: none;
      }
    }

    /* ========== SECTION DIVIDER ========== */
    .section-divider {
      position: relative;
      height: 1px;
      background: var(--rule);
      margin: 60px 0;
    }

    .section-divider::after {
      content: '';
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 8px;
      height: 8px;
      background: var(--accent);
      border-radius: 50%;
    }

    .section-divider.dot-20::after { left: 20%; }
    .section-divider.dot-35::after { left: 35%; }
    .section-divider.dot-50::after { left: 50%; }
    .section-divider.dot-65::after { left: 65%; }
    .section-divider.dot-80::after { left: 80%; }

    /* ========== SECTIONS ========== */
    section {
      padding-bottom: 20px;
    }

    /* Section titles - Real headings, sentence case */
    .section-title {
      font-family: var(--font-sans);
      font-size: var(--h2);
      font-weight: 600;
      color: var(--ink);
      margin-bottom: 28px;
      line-height: var(--lh-head);
    }

    /* ========== EPIGRAPH ========== */
    .epigraph {
      border-left: 3px solid var(--accent);
      padding-left: 20px;
      padding-bottom: 32px;
      margin: 0 0 40px;
      max-width: 580px;
      border-bottom: 1px solid var(--rule);
    }

    .epigraph blockquote {
      font-family: var(--font-sans);
      font-size: 18px;
      font-weight: 400;
      font-style: italic;
      line-height: 1.55;
      color: var(--muted);
      margin: 0 0 10px;
    }

    .epigraph cite {
      display: block;
      font-family: var(--font-sans);
      font-size: 14px;
      font-style: normal;
      color: var(--quiet);
    }

    /* ========== EVENT DETAILS ========== */
    .event-details {
      max-width: 640px;
      margin-bottom: 36px;
      padding: 20px 0;
      border-top: 1px solid var(--rule);
    }

    .event-details p {
      font-size: var(--small);
      color: var(--muted);
      margin-bottom: 6px;
      line-height: 1.5;
    }

    .event-details p:last-child {
      margin-bottom: 0;
    }

    .event-details strong {
      color: var(--quiet);
      font-weight: 500;
    }

    /* ========== PURPOSE CONTENT ========== */
    .purpose-content {
      max-width: 640px;
    }

    .purpose-content p {
      font-size: var(--body);
      margin-bottom: 24px;
      line-height: var(--lh-body);
      color: var(--muted);
    }

    /* ========== QUESTIONS ========== */
    .questions {
      max-width: 640px;
    }

    .questions-intro {
      font-size: var(--body);
      font-weight: 600;
      color: var(--ink);
      margin-bottom: 12px;
    }

    .questions-desc {
      font-size: var(--body);
      color: var(--muted);
      line-height: var(--lh-body);
      margin-bottom: 24px;
    }

    .questions-list {
      list-style: none;
    }

    .questions-list li {
      position: relative;
      padding-left: 20px;
      margin-bottom: 20px;
    }

    .questions-list li::before {
      content: '';
      position: absolute;
      left: 0;
      top: 8px;
      width: 6px;
      height: 6px;
      background: var(--accent);
      border-radius: 50%;
    }

    .questions-list .q {
      font-family: var(--font-sans);
      font-size: var(--body);
      font-weight: 400;
      color: var(--ink);
      line-height: 1.4;
      margin-bottom: 4px;
    }

    .questions-list .context {
      font-size: var(--small);
      color: var(--muted);
      line-height: 1.55;
    }

    /* ========== PROGRAM ========== */
    .program-grid {
      max-width: 640px;
    }

    .program-item {
      display: grid;
      grid-template-columns: 55px 1fr;
      gap: 20px;
      padding: 16px 0;
      border-bottom: 1px solid var(--rule);
    }

    .program-item:first-child {
      padding-top: 0;
    }

    .program-item:last-child {
      border-bottom: none;
    }

    .program-time {
      font-size: 14px;
      font-weight: 500;
      color: var(--quiet);
      font-variant-numeric: tabular-nums;
    }

    .program-title {
      font-size: var(--body);
      font-weight: 600;
      color: var(--ink);
      margin-bottom: 4px;
    }

    .program-desc {
      font-size: var(--small);
      color: var(--muted);
      line-height: 1.5;
    }

    /* ========== HOSTS ========== */
    .hosts-list {
      max-width: 640px;
      margin-bottom: 24px;
    }

    .hosts-list p {
      margin-bottom: 10px;
      font-size: var(--body);
    }

    .hosts-list a {
      color: var(--ink);
      text-decoration: none;
      font-weight: 600;
      transition: color 0.2s ease;
    }

    .hosts-list a:hover {
      color: var(--accent);
    }

    .hosts-list .role {
      color: var(--muted);
      font-weight: 400;
    }

    .hosts-meta {
      font-size: var(--small);
      color: var(--muted);
      margin-bottom: 18px;
      max-width: 640px;
    }

    .hosts-meta a {
      color: var(--ink);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .hosts-meta a:hover {
      color: var(--accent);
    }

    .organizers {
      font-size: var(--small);
      color: var(--muted);
    }

    .organizers a {
      color: var(--ink);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .organizers a:hover {
      color: var(--accent);
    }

    /* ========== CONTACT ========== */
    .contact-form {
      display: flex;
      flex-direction: column;
      gap: 24px;
      max-width: 400px;
      margin-bottom: 32px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .form-group label {
      font-size: 14px;
      font-weight: 500;
      color: var(--quiet);
    }

    .form-group .optional {
      font-weight: 400;
    }

    .form-group input,
    .form-group textarea {
      font-family: var(--font-sans);
      font-size: 16px;
      padding: 12px 0;
      border: none;
      border-bottom: 1px solid var(--rule);
      background: transparent;
      color: var(--ink);
      transition: border-color 0.2s ease;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-bottom-color: var(--accent);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .submit-btn {
      align-self: flex-start;
      font-family: var(--font-sans);
      font-size: 14px;
      font-weight: 600;
      color: var(--ink);
      background: transparent;
      border: none;
      border-bottom: 1px solid var(--ink);
      padding: 0 0 4px 0;
      cursor: pointer;
      transition: color 0.2s ease, border-color 0.2s ease;
    }

    .submit-btn:hover {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }

    .invite-cta {
      max-width: 500px;
      margin-bottom: 32px;
    }

    .invite-desc {
      font-size: var(--body);
      color: var(--muted);
      margin-bottom: 20px;
      line-height: var(--lh-body);
    }

    .invite-btn {
      display: inline-block;
      font-family: var(--font-sans);
      font-size: 15px;
      font-weight: 600;
      color: var(--ink);
      text-decoration: none;
      border-bottom: 2px solid var(--ink);
      padding-bottom: 4px;
      transition: color 0.2s ease, border-color 0.2s ease;
    }

    .invite-btn:hover {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }

    .contact-email {
      font-size: var(--small);
      color: var(--muted);
    }

    .contact-email a {
      color: var(--ink);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .contact-email a:hover {
      color: var(--accent);
    }

    /* ========== FOOTER ========== */
    footer {
      padding: 48px 0;
      border-top: 1px solid var(--rule);
      margin-top: 40px;
      text-align: left;
    }

    .footer-dot {
      width: 8px;
      height: 8px;
      background: var(--accent);
      border-radius: 50%;
      margin-bottom: 20px;
    }

    footer p {
      font-size: 13px;
      color: var(--quiet);
      margin-bottom: 6px;
    }

    footer .host-credit {
      font-size: 12px;
      color: var(--quiet);
    }

    /* ========== RESPONSIVE ========== */
    @media (max-width: 1024px) {
      :root {
        --left-margin: 5vw;
      }

      .hero {
        min-height: 380px;
      }
    }

    @media (max-width: 768px) {
      :root {
        --left-margin: 24px;
        --h1: 40px;
        --h2: 22px;
      }

      .page-wrap {
        padding-right: 24px;
      }

      .nav {
        flex-direction: column;
        gap: 16px;
        align-items: flex-start;
        margin-bottom: 40px;
      }

      .hero {
        min-height: auto;
        padding-bottom: 48px;
      }

      .hero-subtitle,
      .hero-lede,
      .hero-meta {
        font-size: 16px;
      }

      .hero-visual {
        opacity: 0.4;
      }

      .section-divider {
        margin: 48px 0;
      }

      .program-item {
        grid-template-columns: 50px 1fr;
        gap: 16px;
      }
    }

    @media (max-width: 480px) {
      :root {
        --h1: 34px;
        --h2: 20px;
      }

      .hero-subtitle,
      .hero-lede,
      .hero-meta {
        font-size: 15px;
      }

      .hero-visual {
        opacity: 0.3;
      }

      .program-item {
        grid-template-columns: 1fr;
        gap: 6px;
      }

      .program-time {
        font-size: 13px;
      }
    }
  </style>
</head>
<body>

  <div class="page-wrap">
    <div class="content-width">

      <!-- Navigation -->
      <nav class="nav">
        <a href="#" class="nav-brand">e184 × NeuroNYC</a>
        <div class="nav-links">
          <a href="#purpose">Purpose</a> · <a href="#program">Program</a> · <a href="#hosts">Hosts</a> · <a href="#contact">Contact</a>
        </div>
      </nav>

      <!-- Hero -->
      <section class="hero">
        <div class="hero-content">
          <h1 class="hero-title">Foundation Models<br>for the Brain</h1>
          <p class="hero-subtitle">Laying the groundwork for the next stage in neurotech and AI</p>
          <p class="hero-lede">An invite-only evening for researchers working on brain foundation models—across hardware, data, and real-world systems.</p>
          <p class="hero-meta">March 26, 2026 · 5–9 PM · Brown Rudnick · New York City</p>
        </div>

        <!-- Animated Background: Signal to Structure -->
        <div class="hero-visual" id="heroVisual">
          <canvas id="heroCanvas"></canvas>
        </div>
      </section>

      <!-- Divider -->
      <div class="section-divider dot-65"></div>

      <!-- Purpose Section -->
      <section id="purpose">
        <!-- Epigraph -->
        <div class="epigraph">
          <blockquote>
            "The most fruitful areas for the growth of the sciences were those which had been neglected as a no-man's land between the various established fields."
          </blockquote>
          <cite>— Norbert Wiener, 1948</cite>
        </div>

        <h2 class="section-title">Overview and goals</h2>

        <div class="purpose-content">
          <p>Brain foundation models are moving fast, but the field is constrained by very practical questions: what neural data is realistically available, what today's sensing can and can't capture, where the true bottlenecks are, and where the next improvements need to come from (hardware? data access and scale? data quality? objectives? evaluation? deployment pathways?).</p>

          <p>This invite-only evening convenes a cross-cutting group of research practitioners across neural sensing, recording, modeling, and adjacent technical fields—bringing together approaches and communities that don't often share the same room. The goal is to create a space where people can share how they're navigating these trade-offs in practice: comparing assumptions, surfacing productive disagreement, and clarifying what seems to be working right now (and what isn't).</p>
        </div>

        <div class="questions">
          <p class="questions-intro">Themes we'll return to</p>
          <p class="questions-desc">Rather than centering on a single methodology or application area, the evening will return to a small set of shared themes that cut across current work in the field:</p>
          <ul class="questions-list">
            <li>
              <p class="q">Constraints in practice</p>
              <p class="context">What currently limits progress—sensing, data collection paradigms, access and scale, model assumptions, validation</p>
            </li>
            <li>
              <p class="q">Generalization</p>
              <p class="context">What kinds of generalization are being targeted (across individuals, tasks, regions, modalities, or settings), and which ones appear feasible today</p>
            </li>
            <li>
              <p class="q">Different approaches to progress</p>
              <p class="context">Contrasting strategies for moving forward under constraint, including differences in data sources, modeling choices, and experimental setups</p>
            </li>
            <li>
              <p class="q">Scale</p>
              <p class="context">When scaling data or models appears to help, and where it does not</p>
            </li>
            <li>
              <p class="q">From research to systems</p>
              <p class="context">What is being deployed or tested in real-world contexts, and what those experiences reveal about "what works"</p>
            </li>
          </ul>
        </div>
      </section>

      <!-- Divider -->
      <div class="section-divider dot-35"></div>

      <!-- Program Section -->
      <section id="program">
        <h2 class="section-title">Program</h2>

        <div class="program-grid">
          <div class="program-item">
            <span class="program-time">5:00</span>
            <div>
              <p class="program-title">Welcome and drinks</p>
            </div>
          </div>
          <div class="program-item">
            <span class="program-time">5:30</span>
            <div>
              <p class="program-title">Panel 1 — Original approaches and where progress is bottlenecked</p>
              <p class="program-desc">A conversation about different strategies currently being pursued across sensing, data, and modeling—and what those approaches suggest about where progress is actually constrained today.</p>
            </div>
          </div>
          <div class="program-item">
            <span class="program-time">6:30</span>
            <div>
              <p class="program-title">Panel 2 — From research to real-world systems</p>
              <p class="program-desc">A discussion of what changes when models move toward deployment: validation, integration, and near-term value across clinical, invasive, and consumer paths—and how "working" gets defined once systems interact with reality.</p>
            </div>
          </div>
          <div class="program-item">
            <span class="program-time">7:30</span>
            <div>
              <p class="program-title">Keynote</p>
            </div>
          </div>
          <div class="program-item">
            <span class="program-time">8:00</span>
            <div>
              <p class="program-title">Reception and informal discussion</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Divider -->
      <div class="section-divider dot-50"></div>

      <!-- Hosts Section -->
      <section id="hosts">
        <h2 class="section-title">Hosts & Venue</h2>

        <div class="hosts-list">
          <p><a href="https://e184.org" target="_blank" rel="noopener">e184</a> <span class="role">— Co-host</span></p>
          <p><a href="https://neuro-nyc.org" target="_blank" rel="noopener">NeuroNYC</a> <span class="role">— Co-host</span></p>
          <p><a href="https://www.brownrudnick.com" target="_blank" rel="noopener">Brown Rudnick</a> <span class="role">— Venue</span></p>
        </div>

        <p class="organizers">
          Organized by
          <a href="https://www.linkedin.com/in/margot-hanley-phd-5183aa20/" target="_blank" rel="noopener">Margot Hanley</a> (NeuroNYC)
          and
          <a href="https://www.linkedin.com/in/peter-zhegin-526a993/" target="_blank" rel="noopener">Peter Zhegin</a> (e184)
        </p>
      </section>

      <!-- Divider -->
      <div class="section-divider dot-20"></div>

      <!-- Contact Section -->
      <section id="contact">
        <h2 class="section-title">Request an invite</h2>

        <div class="invite-cta">
          <p class="invite-desc">This is an invite-only event for researchers and practitioners working on brain foundation models.</p>
          <a href="https://docs.google.com/forms/d/e/1FAIpQLSc_CnxQetl2ePyG4je0uzG-EN9hvbnx-72q9cf4oV195M2niQ/viewform" target="_blank" rel="noopener" class="invite-btn">Request an invite →</a>
        </div>

        <p class="contact-email">For other questions, reach out to <a href="mailto:margothanley@gmail.com">margothanley@gmail.com</a></p>
      </section>

      <!-- Footer -->
      <footer>
        <div class="footer-dot"></div>
        <p>Foundation Models for the Brain · March 26, 2026 · New York City</p>
        <p class="host-credit">Hosted by e184 × NeuroNYC</p>
      </footer>

    </div>
  </div>

  <!-- Hero Animation: Signal → Structure (Right side only, fluid motion) -->
  <script>
    (function() {
      'use strict';

      // ============ CONFIGURATION ============
      const CONFIG = {
        dotCount: 55,
        dotMinRadius: 2,
        dotMaxRadius: 4.5,

        // Colors (slightly more subtle)
        colors: {
          primary: 'rgba(121, 191, 208, 0.7)',
          secondary: 'rgba(142, 200, 215, 0.6)',
          tertiary: 'rgba(168, 213, 226, 0.5)',
          line: 'rgba(121, 191, 208, 0.15)'
        },

        // Network
        maxEdgesPerNode: 2,
        edgeDistance: 65,
        lineWidth: 0.8,

        // Single continuous loop duration (seconds) - 12s is fast enough to see evolving
        loopDuration: 12,

        // Smoothing for fluid motion (slightly higher = faster response)
        smoothing: 0.025
      };

      const canvas = document.getElementById('heroCanvas');
      if (!canvas) return;

      const ctx = canvas.getContext('2d');
      const container = document.getElementById('heroVisual');
      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      let width, height, dpr;
      let dots = [];
      let edges = [];
      let animationTime = 0;
      let lastTimestamp = 0;
      let clusterCenters = [];
      let safeZoneWidth = 0;

      function resize() {
        dpr = window.devicePixelRatio || 1;
        width = container.offsetWidth;
        height = container.offsetHeight;

        canvas.width = width * dpr;
        canvas.height = height * dpr;
        canvas.style.width = width + 'px';
        canvas.style.height = height + 'px';
        ctx.scale(dpr, dpr);

        // Safe zone = left 55% (where hero text is)
        safeZoneWidth = width * 0.55;

        // Animation zone = right 45%
        const animZoneStart = safeZoneWidth;
        const animZoneWidth = width - safeZoneWidth;
        const vertPadding = height * 0.1;

        // Cluster centers form a grid-like structure (3x3 pattern)
        clusterCenters = [
          // Top row
          { x: animZoneStart + animZoneWidth * 0.2, y: vertPadding + height * 0.15 },
          { x: animZoneStart + animZoneWidth * 0.5, y: vertPadding + height * 0.15 },
          { x: animZoneStart + animZoneWidth * 0.8, y: vertPadding + height * 0.15 },
          // Middle row
          { x: animZoneStart + animZoneWidth * 0.2, y: vertPadding + height * 0.45 },
          { x: animZoneStart + animZoneWidth * 0.5, y: vertPadding + height * 0.45 },
          { x: animZoneStart + animZoneWidth * 0.8, y: vertPadding + height * 0.45 },
          // Bottom row
          { x: animZoneStart + animZoneWidth * 0.2, y: vertPadding + height * 0.75 },
          { x: animZoneStart + animZoneWidth * 0.5, y: vertPadding + height * 0.75 },
          { x: animZoneStart + animZoneWidth * 0.8, y: vertPadding + height * 0.75 }
        ];
      }

      function initDots() {
        dots = [];
        const colorTypes = ['primary', 'secondary', 'tertiary'];

        for (let i = 0; i < CONFIG.dotCount; i++) {
          const clusterIndex = Math.floor(Math.random() * clusterCenters.length);
          const cluster = clusterCenters[clusterIndex];

          // Scattered position (random across animation zone)
          const scatterX = safeZoneWidth + 20 + Math.random() * (width - safeZoneWidth - 40);
          const scatterY = height * 0.1 + Math.random() * height * 0.8;

          // Clustered position (near assigned cluster)
          const clusterX = cluster.x + (Math.random() - 0.5) * 40;
          const clusterY = cluster.y + (Math.random() - 0.5) * 35;

          // Structured position (tighter, more organized)
          const structuredX = cluster.x + (Math.random() - 0.5) * 25;
          const structuredY = cluster.y + (Math.random() - 0.5) * 20;

          const colorType = colorTypes[Math.floor(Math.random() * colorTypes.length)];

          dots.push({
            x: scatterX,
            y: scatterY,
            scatterX,
            scatterY,
            clusterX,
            clusterY,
            structuredX,
            structuredY,
            radius: CONFIG.dotMinRadius + Math.random() * (CONFIG.dotMaxRadius - CONFIG.dotMinRadius),
            color: CONFIG.colors[colorType],
            cluster: clusterIndex,
            // Each dot has slightly different timing for organic feel
            phaseOffset: Math.random() * 0.15,
            driftPhase: Math.random() * Math.PI * 2,
            driftSpeed: 0.3 + Math.random() * 0.2
          });
        }
      }

      function calculateEdges() {
        edges = [];
        for (let i = 0; i < dots.length; i++) {
          const dot = dots[i];
          const distances = [];

          for (let j = 0; j < dots.length; j++) {
            if (i === j) continue;
            const other = dots[j];
            const dx = dot.structuredX - other.structuredX;
            const dy = dot.structuredY - other.structuredY;
            const dist = Math.sqrt(dx * dx + dy * dy);

            if (dist < CONFIG.edgeDistance) {
              distances.push({ index: j, dist });
            }
          }

          distances.sort((a, b) => a.dist - b.dist);
          const edgeCount = Math.min(CONFIG.maxEdgesPerNode, distances.length);

          for (let k = 0; k < edgeCount; k++) {
            const j = distances[k].index;
            if (i < j) {
              edges.push({ from: i, to: j });
            }
          }
        }
      }

      // Smooth sine easing for continuous flow
      function smoothstep(t) {
        return t * t * (3 - 2 * t);
      }

      // Get continuous progress (0 to 1 and back, no stopping)
      function getContinuousProgress(time) {
        const loopTime = time % CONFIG.loopDuration;
        const halfLoop = CONFIG.loopDuration / 2;

        if (loopTime < halfLoop) {
          // First half: scattered → structured (0 → 1)
          return smoothstep(loopTime / halfLoop);
        } else {
          // Second half: structured → scattered (1 → 0)
          return smoothstep(1 - (loopTime - halfLoop) / halfLoop);
        }
      }

      function updateDots() {
        const progress = getContinuousProgress(animationTime);

        dots.forEach(dot => {
          // Individual timing offset for organic feel
          const dotProgress = getContinuousProgress(animationTime + dot.phaseOffset * CONFIG.loopDuration);

          // Subtle ambient drift (always present, very gentle)
          const drift = Math.sin(animationTime * dot.driftSpeed + dot.driftPhase) * 2;
          const driftY = Math.cos(animationTime * dot.driftSpeed * 0.8 + dot.driftPhase) * 2;

          // Three-stage interpolation: scatter → cluster → structure
          let goalX, goalY;

          if (dotProgress < 0.5) {
            // Scatter to cluster (0 to 0.5 → 0 to 1)
            const t = dotProgress * 2;
            goalX = dot.scatterX + (dot.clusterX - dot.scatterX) * t;
            goalY = dot.scatterY + (dot.clusterY - dot.scatterY) * t;
          } else {
            // Cluster to structure (0.5 to 1 → 0 to 1)
            const t = (dotProgress - 0.5) * 2;
            goalX = dot.clusterX + (dot.structuredX - dot.clusterX) * t;
            goalY = dot.clusterY + (dot.structuredY - dot.clusterY) * t;
          }

          // Add drift (decreases as dots become more structured)
          const driftAmount = 1 - dotProgress * 0.7;
          goalX += drift * driftAmount;
          goalY += driftY * driftAmount;

          // Smooth interpolation toward goal
          dot.x += (goalX - dot.x) * CONFIG.smoothing;
          dot.y += (goalY - dot.y) * CONFIG.smoothing;
        });
      }

      function draw() {
        const progress = getContinuousProgress(animationTime);

        ctx.clearRect(0, 0, width, height);

        // Edges fade in smoothly as dots cluster and structure
        // Start appearing at progress 0.3, full at 0.7
        const edgeOpacity = Math.max(0, Math.min(0.25, (progress - 0.3) * 0.625));

        // Draw edges
        if (edgeOpacity > 0.01) {
          ctx.strokeStyle = `rgba(121, 191, 208, ${edgeOpacity})`;
          ctx.lineWidth = CONFIG.lineWidth;
          ctx.lineCap = 'round';
          ctx.beginPath();

          edges.forEach(edge => {
            const from = dots[edge.from];
            const to = dots[edge.to];
            ctx.moveTo(from.x, from.y);
            ctx.lineTo(to.x, to.y);
          });

          ctx.stroke();
        }

        // Draw dots
        dots.forEach(dot => {
          ctx.beginPath();
          ctx.arc(dot.x, dot.y, dot.radius, 0, Math.PI * 2);
          ctx.fillStyle = dot.color;
          ctx.fill();
        });
      }

      function animate(timestamp) {
        if (!lastTimestamp) lastTimestamp = timestamp;
        const deltaTime = Math.min((timestamp - lastTimestamp) / 1000, 0.1);
        lastTimestamp = timestamp;

        animationTime += deltaTime;

        updateDots();
        draw();

        requestAnimationFrame(animate);
      }

      function drawStaticFinalState() {
        ctx.clearRect(0, 0, width, height);

        dots.forEach(dot => {
          dot.x = dot.targetX;
          dot.y = dot.targetY;
        });

        ctx.strokeStyle = CONFIG.colors.line;
        ctx.lineWidth = CONFIG.lineWidth;
        ctx.lineCap = 'round';
        ctx.beginPath();

        edges.forEach(edge => {
          ctx.moveTo(dots[edge.from].x, dots[edge.from].y);
          ctx.lineTo(dots[edge.to].x, dots[edge.to].y);
        });
        ctx.stroke();

        dots.forEach(dot => {
          ctx.beginPath();
          ctx.arc(dot.x, dot.y, dot.radius, 0, Math.PI * 2);
          ctx.fillStyle = dot.color;
          ctx.fill();
        });
      }

      function init() {
        resize();
        initDots();
        calculateEdges();

        if (prefersReducedMotion) {
          drawStaticFinalState();
        } else {
          requestAnimationFrame(animate);
        }
      }

      let resizeTimeout;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
          resize();
          initDots();
          calculateEdges();
          if (prefersReducedMotion) drawStaticFinalState();
        }, 150);
      });

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>

</body>
</html>
